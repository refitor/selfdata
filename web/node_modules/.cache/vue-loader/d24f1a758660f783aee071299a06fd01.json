{"remainingRequest":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/src/pages/conf.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/src/pages/conf.vue","mtime":1642584069626},{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jery/Desktop/dev/rshub/product/rsapp/selfdata/web/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5uYXYtaGVhZGVyLWxvZ297CiAgICBmb250LXNpemU6IDIwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBtYXJnaW4tdG9wOiAxNXB4Owp9Ci50cnt0ZXh0LWFsaWduOnJpZ2h0fQoubXQxMHsKICAgIG1hcmdpbi10b3A6IDEwcHg7Cn0KLm1lbnUtaXRlbSB7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIGZvbnQtc2l6ZTogMTZweDsKfQo="},{"version":3,"sources":["conf.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"conf.vue","sourceRoot":"src/pages","sourcesContent":["<style lang=\"less\">\n.nav-header-logo{\n    font-size: 20px;\n    text-align: center;\n    margin-top: 15px;\n}\n.tr{text-align:right}\n.mt10{\n    margin-top: 10px;\n}\n.menu-item {\n    margin-top: 10px;\n    margin-bottom: 10px;\n    font-size: 16px;\n}\n</style>\n<template>\n    <div>\n        <Collapse v-model=\"mainColl\" simple>\n            <div v-if=\"mustConf !== {}\">\n                <div v-for=\"(jsonVal, jsonKey) in mustConf\" :key=\"jsonKey\" style=\"margin-top: 10px; margin-bottom: 10px;\">\n                    <Panel v-show=\"getConfTitle(jsonKey, jsonVal) !== ''\" :name=\"getConfTitle(jsonKey, jsonVal)\" style=\"font-size: 20px;\">\n                        {{getConfTitle(jsonKey, jsonVal)}}\n                        <div slot=\"content\" style=\"text-align: left;\">\n                            <Button type=\"primary\" @click=\"doUpdate(jsonKey)\">{{$t('lang.update')}}</Button>\n                        </div>\n                    </Panel>\n                    <div  style=\"background-color: #23232e; height: 10px;margin-top: 10px;\"></div>\n                </div>\n            </div>\n            <div style=\"margin-top: 10px; margin-bottom: 10px;\">\n                <Panel name=\"confItems\" style=\"font-size: 20px;\">\n                    {{$t('lang.commonConf')}}<Button :disabled=\"!needUpdate\" type=\"primary\" @click=\"doOperate(jsonKey)\" style=\"margin-left: 10px;\">{{$t('lang.update')}}</Button>\n                    <Editor ref=\"fileEditor\"\n                    slot=\"content\"\n                    :content=\"commonConf\"\n                    :fontSize=\"14\"\n                    :height=\"pageHeight() - 298 + 'px'\"\n                    lang=\"text\"\n                    theme=\"chrome\"\n                    @init=\"editorInit\"\n                    @onChange=\"editorChange\"\n                    @onInput=\"editorInput\"\n                    @onFocus=\"editorFocus\"\n                    @onBlur=\"editorBlur\"\n                    @onPaste=\"editorPaste\"\n                    ></Editor>\n                </Panel>\n            </div>\n        </Collapse>\n        <br>\n        <AuthPanel ref=\"authPanel\" :onAuthSuccessed=\"onAuthSuccessed\"></AuthPanel>\n    </div>\n</template>\n<script>\nimport AuthPanel from './auth.vue';\nimport Editor from 'vue2x-ace-editor';\nimport {webResponse} from '../toolchain/help.js';\nexport default {\n    data(){\n        return {\n            mainColl: '1',\n            activeBtnList: [],\n\n            config: {},\n            mustConf: {\n                'AuthID': '',\n                'DataCert': '',\n                'NetCert': '',\n            },\n            commonConf: '',\n            needUpdate: false,\n        }\n    },\n    props: {\n        params: {\n            type: Object,\n            default: {},\n        }\n    },\n    created() {\n\n    },\n    mounted() {\n        this.getConfigList('encryption/meta.json');\n    },\n    methods:{\n        getConfTitle(name, val) {\n            console.log(name)\n            let ret = '';\n            if (name === 'AuthID') ret = this.$t('lang.authID');\n            else if (name.indexOf('Data') > -1) ret = this.$t('lang.dataCert');\n            else if (name.indexOf('Net') > -1) ret = this.$t('lang.netCert');\n            return ret;\n        },\n        getConfigList(confPath) {\n            let self = this;\n            let fileUrl = '/api/file/view?filepath=' + confPath + '&from=selfdata';\n            this.httpGet(fileUrl, function(response) {\n                self.setData(response.data);\n            }, null);\n        },\n        setData(data) {\n            this.config = data;\n            let commonConf = {};\n            \n            for (let key in data) {\n                if (key === 'AuthID') this.mustConf[key] = data[key];\n                else if (key.indexOf('Data') > -1) this.mustConf['DataCert'] = 'DataCert';\n                else if (key.indexOf('Net') > -1) this.mustConf['NetCert'] = 'NetCert';\n                else {\n                    commonConf[key] = data[key];\n                }\n            }\n            console.log(this.mustConf)\n            this.commonConf = JSON.stringify(commonConf, null, '\\t');\n        },\n        doUpdate(activeKey) {\n            if (activeKey === 'AuthID') this.$refs.authPanel.runModal(this.mustConf['AuthID'])\n        },\n        onAuthSuccessed(response) {\n            this.config['AuthID'] = this.mustConf['AuthID']\n        },\n        pageHeight(){ //函数：获取尺寸\n            //获取浏览器窗口高度\n            var winHeight=0;\n            if (window.innerHeight){\n                winHeight = window.innerHeight;\n            }\n            else if ((document.body) && (document.body.clientHeight)){\n                winHeight = document.body.clientHeight;\n            }\n            //通过深入Document内部对body进行检测，获取浏览器窗口高度\n            if (document.documentElement && document.documentElement.clientHeight){\n                winHeight = document.documentElement.clientHeight;\n            }\n            //DIV高度为浏览器窗口的高度\n            //document.getElementById(\"test\").style.height= winHeight +\"px\";\n            //DIV高度为浏览器窗口高度的一半\n            // document.getElementById(\"test\").style.height= winHeight/2 +\"px\";\n            return winHeight;\n        },\n        getContent() {\n            return this.$refs.fileEditor.getValue();\n        },\n        editorInit() {\n            require(\"brace/ext/language_tools\");\n            require(`brace/mode/text`);\n            require(`brace/snippets/text`);\n            require(`brace/theme/chrome`);\n            \n            require('brace/mode/json')    //language\n            require('brace/mode/less')\n            require('brace/mode/yaml')\n            require('brace/snippets/json') //snippet\n        },\n        editorChange(editor) {\n            // console.log(\"changed\", editor.getValue());\n        },\n        editorInput(editor) {\n            // console.log(\"input\", editor.getValue());\n        },\n        editorFocus(editor) {\n            // console.log(\"focus\", editor);\n        },\n        editorBlur(editor) {\n            // console.log(\"blur\", editor);\n        },\n        editorPaste(editor) {\n            // console.log(\"pase\", editor);\n        },\n        httpGet(url, onResponse, onPanic) {\n            this.$axios.get(url)\n            .then(function (response) {\n                if (onResponse !== undefined && onResponse !== null) onResponse(response);\n            })\n            .catch(function (response) {\n                if (onPanic !== undefined && onPanic !== null) onPanic(response);\n            });\n        },\n        httpPost(url, formdata, onResponse, onPanic) {\n            this.$axios.post(url, formdata)\n            .then(function (response) {\n                if (onResponse !== undefined && onResponse !== null) onResponse(response);\n            })\n            .catch(function (response) {\n                if (onPanic !== undefined && onPanic !== null) onPanic(response);\n            });\n        }\n    },\n    components:{\n        AuthPanel,\n        Editor\n    }\n}\n</script>\n"]}]}